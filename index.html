<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>טבלאות הישגים תיכון אחד העם</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2E7D32;
            --primary-light: #4CAF50;
            --secondary-color: #1565C0;
            --secondary-light: #1976D2;
            --accent-color: #FF5722;
            --text-color: #333;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #757575;
            --white: #ffffff;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
            --error-color: #F44336;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            direction: rtl;
            background-color: var(--light-gray);
            padding: 20px;
            color: var(--text-color);
            margin: 0;
        }
        
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 25px 0;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-top: 0;
            opacity: 0.9;
            font-weight: 500;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .tab-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .exercise-card {
            width: 160px;
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        
        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .exercise-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .exercise-card p {
            padding: 12px;
            margin: 0;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .tab-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 12px 20px;
            background-color: var(--medium-gray);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-color);
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--medium-gray);
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
            box-sizing: border-box;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 15px;
        }
        
        button:hover {
            background-color: var(--primary-light);
        }
        
        .time-input {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .time-input input {
            width: 80px;
            text-align: center;
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--light-gray);
        }
        
        .grade {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
        }
        
        .champion {
            color: #d32f2f;
            background-color: #ffebee;
        }
        
        .excellent {
            color: #2e7d32;
            background-color: #e8f5e9;
        }
        
        .great {
            color: #689f38;
            background-color: #f1f8e9;
        }
        
        .good {
            color: #ff8f00;
            background-color: #fff8e1;
        }
        
        .average {
            color: #ef6c00;
            background-color: #fff3e0;
        }
        
        .needs-improvement {
            color: #d32f2f;
            background-color: #ffebee;
        }
        
        .error {
            color: #d32f2f;
            background-color: #ffebee;
        }
        
        .improvement-section {
            margin-top: 40px;
            padding: 20px;
            background-color: var(--light-gray);
            border-radius: 8px;
            text-align: right;
        }
        
        .improvement-tips h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        
        .improvement-tips ul {
            padding-right: 20px;
            list-style-type: none;
        }
        
        .improvement-tips li {
            margin-bottom: 10px;
            position: relative;
            padding-right: 25px;
        }
        
        .improvement-tips li:before {
            content: "→";
            position: absolute;
            right: 0;
            color: var(--primary-color);
        }
        
        .progress-section {
            margin-top: 30px;
        }
        
        .progress-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .progress-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .progress-input input {
            flex: 1;
        }
        
        .progress-input button {
            margin: 0;
        }
        
        .progress-records {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--medium-gray);
            border-radius: 6px;
            padding: 10px;
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .record-item:last-child {
            border-bottom: none;
        }
        
        .chart-container {
            margin-top: 30px;
            height: 300px;
            position: relative;
        }
        
        .chart-controls {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
        }
        
        .reset-btn {
            background-color: var(--error-color);
            padding: 8px 15px;
            font-size: 14px;
        }
        
        .reset-btn:hover {
            background-color: #e53935;
        }
        
        .training-plan {
            margin-top: 30px;
            text-align: center;
        }
        
        .training-plan-btn {
            background-color: var(--secondary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .training-plan-btn:hover {
            background-color: var(--secondary-light);
        }
        
        .training-plan-content {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: var(--light-gray);
            border-radius: 8px;
            text-align: right;
        }
        
        .plan-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .plan-options select, .plan-options button {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--medium-gray);
        }
        
        .generated-plan {
            text-align: right;
            padding: 15px;
            background-color: var(--white);
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--dark-gray);
            font-size: 14px;
        }
        
        .footer a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .exercise-card {
                width: 140px;
            }
            
            .tab-buttons {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
            
            .container {
                padding: 15px;
            }
            
            .plan-options {
                flex-direction: column;
            }
            
            .plan-options select, .plan-options button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>טבלאות הישגים - תיכון אחד העם</h1>
        <p class="subtitle">חישוב ציונים ומעקב התקדמות בתרגילים הספורטיביים</p>
    </div>
    
    <div class="container">
        <div class="tab-container">
            <div class="exercise-card" onclick="openTab('pushups')">
                <img src="https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?ixlib=rb-1.2.1&auto=format&fit=crop&w=640&q=80" alt="כפיפות מרפקים">
                <p>כפיפות מרפקים</p>
            </div>
            <div class="exercise-card" onclick="openTab('tension')">
                <img src="https://images.unsplash.com/photo-1605296867424-35fc25c9212a?ixlib=rb-1.2.1&auto=format&fit=crop&w=640&q=80" alt="עליות מתח">
                <p>עליות מתח</p>
            </div>
            <div class="exercise-card" onclick="openTab('rope')">
                <img src="https://portavozdigital.com/wp-content/uploads/2020/10/saltar-la-cuerda-1024x693.jpg" alt="קפיצות בדלגית">
                <p>קפיצות בדלגית</p>
            </div>
            <div class="exercise-card" onclick="openTab('run')">
                <img src="https://images.unsplash.com/photo-1552674605-db6ffd4facb5?ixlib=rb-1.2.1&auto=format&fit=crop&w=640&q=80" alt="ריצה">
                <p>ריצת 2000 מ'</p>
            </div>
            <div class="exercise-card" onclick="openTab('ball-run')">
                <img src="https://www.snoridgecrossfit.com/wp-content/uploads/2016/08/SnoRidge-CrossFit_Med-Ball-Run.jpg" alt="ריצת כדורי כח">
                <p>ריצת כדורי כח</p>
            </div>
            <div class="exercise-card" onclick="openTab('bip')">
                <img src="https://www.wincol.ac.il/wincol.ac.il/originals/beep%20test.jpg" alt="ריצת ביפ">
                <p>ריצת ביפ</p>
            </div>
        </div>
        
        <div class="tab-buttons">
            <button class="tab-btn active" data-tab="pushups">כפיפות מרפקים</button>
            <button class="tab-btn" data-tab="tension">עליות מתח</button>
            <button class="tab-btn" data-tab="rope">קפיצות בדלגית</button>
            <button class="tab-btn" data-tab="run">ריצת 2000 מ'</button>
            <button class="tab-btn" data-tab="ball-run">ריצת כדורי כח</button>
            <button class="tab-btn" data-tab="bip">ריצת ביפ</button>
        </div>
    </div>
    
    <!-- כפיפות מרפקים -->
    <div id="pushups" class="tab-content active">
        <div class="container">
            <h2>טבלת הישגים - כפיפות מרפקים</h2>
            
            <div class="form-group">
                <label for="grade">שכבת גיל:</label>
                <select id="grade">
                    <option value="י'">שכבת י'</option>
                    <option value="יא">שכבת י"א</option>
                    <option value="יב">שכבת י"ב</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="score">מספר כפיפות מרפקים:</label>
                <input type="number" id="score" placeholder="לדוגמה: 45" min="0" max="100">
            </div>
            
            <button onclick="calculateGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="result"></div>
                <div id="feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בכפיפות מרפקים</h3>
                    <ul>
                        <li>התחל עם תרגילים בסיסיים כמו כפיפות מרפקים מול קיר או עם ברכיים על הרצפה</li>
                        <li>שמור על גוף ישר וחזק לאורך כל התרגיל</li>
                        <li>נשום פנימה כאשר אתה מוריד את עצמך ונשוף החוצה כאשר אתה דוחף מעלה</li>
                        <li>הגדל בהדרגה את מספר החזרות בכל אימון</li>
                        <li>בצע אימוני כוח נוספים לשרירי החזה, הכתפיים והזרועות</li>
                        <li>שמור על תזונה עשירה בחלבונים לתמיכה בבניית השריר</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="pushups-date">
                            <input type="number" id="pushups-count" placeholder="מספר כפיפות">
                            <button onclick="addProgressRecord('pushups')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="pushups-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="pushups-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('pushups')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('pushups')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-pushups" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- עליות מתח -->
    <div id="tension" class="tab-content">
        <div class="container">
            <h2>טבלת הישגים - עליות מתח</h2>
            
            <div class="form-group">
                <label for="tension-grade">שכבת גיל:</label>
                <select id="tension-grade">
                    <option value="י">שכבת י'</option>
                    <option value="יא">שכבת י"א</option>
                    <option value="יב">שכבת י"ב</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="tension-score">מספר עליות מתח:</label>
                <input type="number" id="tension-score" placeholder="לדוגמה: 12" min="0" max="100">
            </div>
            
            <button onclick="calculateTensionGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="tension-result"></div>
                <div id="tension-feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בעליות מתח</h3>
                    <ul>
                        <li>התחל עם תרגילי הכנה כמו תלייה על המתח למשך זמן</li>
                        <li>בצע תרגילי תנופה עם קפיצה קלה לעזרה בהתחלה</li>
                        <li>שמור על אחיזה רחבה מעט יותר מרוחב הכתפיים</li>
                        <li>השתמש בחגורת משקל או עזרים אחרים להפחתת משקל אם צריך</li>
                        <li>בצע אימונים לשרירי הגב והיד האחורית</li>
                        <li>הגדל בהדרגה את מספר החזרות בכל אימון</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="tension-date">
                            <input type="number" id="tension-count" placeholder="מספר עליות">
                            <button onclick="addProgressRecord('tension')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="tension-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="tension-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('tension')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content-tension" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level-tension">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration-tension">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('tension')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-tension" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- קפיצות בדלגית -->
    <div id="rope" class="tab-content">
        <div class="container">
            <h2>טבלת הישגים - קפיצות בדלגית</h2>
            
            <div class="form-group">
                <label for="rope-score">מספר קפיצות בדקה:</label>
                <input type="number" id="rope-score" placeholder="לדוגמה: 120" min="0" max="300">
            </div>
            
            <button onclick="calculateRopeGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="rope-result"></div>
                <div id="rope-feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בקפיצות בדלגית</h3>
                    <ul>
                        <li>השתמש בדלגית באורך המתאים לגובה שלך</li>
                        <li>שמור על מרפקים קרובים לגוף וסיבוב מהפרק בלבד</li>
                        <li>קפוץ נמוך ובקצב קבוע</li>
                        <li>התחל עם פרקי זמן קצרים והגדל בהדרגה</li>
                        <li>תרגל סוגים שונים של קפיצות (רגליים יחד, לסירוגין, צולבות)</li>
                        <li>בצע אימוני סיבולת לב ריאה נוספים</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="rope-date">
                            <input type="number" id="rope-count" placeholder="מספר קפיצות">
                            <button onclick="addProgressRecord('rope')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="rope-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="rope-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('rope')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content-rope" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level-rope">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration-rope">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('rope')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-rope" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ריצת 2000 מטר -->
    <div id="run" class="tab-content">
        <div class="container">
            <h2>טבלת הישגים - ריצת 2000 מטר</h2>
            
            <div class="form-group">
                <label for="run-grade">שכבת גיל:</label>
                <select id="run-grade">
                    <option value="10">שכבת י'</option>
                    <option value="11">שכבת י"א</option>
                    <option value="12">שכבת י"ב</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="time">זמן ריצה:</label>
                <div class="time-input">
                    <input type="number" id="run-seconds" min="0" max="59" value="0" placeholder="שניות">
                    <span>:</span>
                    <input type="number" id="run-minutes" min="0" max="59" value="8" placeholder="דקות">
                </div>
            </div>
            
            <button onclick="calculateRunGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="run-result"></div>
                <div id="run-feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בריצת 2000 מטר</h3>
                    <ul>
                        <li>בצע אימוני סיבולת כמו ריצות ארוכות בקצב נוח</li>
                        <li>תרגל ריצות אינטרוולים לשיפור הסיבולת האנאירובית</li>
                        <li>שמור על קצב אחיד לאורך כל הריצה</li>
                        <li>בצע תרגילי חיזוק לרגליים וליבה</li>
                        <li>הקפד על חימום טוב לפני הריצה ושחרור אחריה</li>
                        <li>הגדל בהדרגה את מרחקי הריצה ואת הקצב</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="run-date">
                            <input type="number" id="run-min" placeholder="דקות">
                            <input type="number" id="run-sec" placeholder="שניות">
                            <button onclick="addProgressRecord('run')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="run-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="run-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('run')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content-run" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level-run">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration-run">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('run')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-run" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ריצת כדורי כח -->
    <div id="ball-run" class="tab-content">
        <div class="container">
            <h2>טבלת הישגים - ריצת כדורי כח</h2>
            
            <div class="form-group">
                <label for="ball-run-score">זמן בשניות:</label>
                <input type="number" id="ball-run-score" step="0.1" min="0" placeholder="לדוגמה: 25.5">
            </div>
            
            <button onclick="calculateBallRunGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="ball-run-result"></div>
                <div id="ball-run-feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בריצת כדורי כח</h3>
                    <ul>
                        <li>תרגל את מעברי הכדורים בנפרד מהריצה</li>
                        <li>שפר את הסיבולת עם ריצות קצרות ואינטנסיביות</li>
                        <li>בצע תרגילי זריזות וסיבובי גוף</li>
                        <li>למד את הטכניקה הנכונה להעברת הכדורים</li>
                        <li>התאמן על שינויי כיוון מהירים</li>
                        <li>בצע אימוני כוח לרגליים ולפלג גוף עליון</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="ball-run-date">
                            <input type="number" id="ball-run-time" step="0.1" placeholder="זמן בשניות">
                            <button onclick="addProgressRecord('ball-run')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="ball-run-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="ball-run-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('ball-run')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content-ball-run" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level-ball-run">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration-ball-run">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('ball-run')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-ball-run" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ריצת ביפ -->
    <div id="bip" class="tab-content">
        <div class="container">
            <h2>טבלת הישגים - ריצת ביפ</h2>
            
            <div class="form-group">
                <label for="bip-grade">שכבת גיל:</label>
                <select id="bip-grade">
                    <option value="10">שכבת י'</option>
                    <option value="11">שכבת י"א</option>
                    <option value="12">שכבת י"ב</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="bip-score">תוצאת מבחן (לדוגמה: 12.2):</label>
                <input type="number" id="bip-score" step="0.01" min="0" placeholder="הזן את תוצאת המבחן">
                <div class="note">לתשומת לבך: תוצאות של מבחן 4.1 או 5.1 וכן הלאה יש לרשום 4.01 או 5.01</div>
            </div>
            
            <button onclick="calculateBipGrade()">חשב ציון</button>
            
            <div class="result-container">
                <div id="bip-result"></div>
                <div id="bip-feedback" class="feedback"></div>
            </div>
            
            <div class="improvement-section">
                <div class="improvement-tips">
                    <h3>טיפים לשיפור בריצת ביפ</h3>
                    <ul>
                        <li>בצע אימוני סיבולת כמו ריצות אינטרוולים</li>
                        <li>תרגל שינויי קצב מהירים</li>
                        <li>שפר את הסיבולת האנאירובית עם ספרינטים קצרים</li>
                        <li>בצע תרגילי חיזוק לרגליים וליבה</li>
                        <li>התאמן על טכניקת ריצה נכונה</li>
                        <li>הגדל בהדרגה את עוצמת האימונים</li>
                    </ul>
                </div>
                
                <div class="progress-section">
                    <h3>מעקב התקדמות</h3>
                    <div class="progress-form">
                        <div class="progress-input">
                            <input type="date" id="bip-date">
                            <input type="number" id="bip-level" step="0.01" placeholder="רמה (לדוגמה 12.2)">
                            <button onclick="addProgressRecord('bip')">הוסף תוצאה</button>
                        </div>
                    </div>
                    
                    <div class="progress-records" id="bip-records">
                        <!-- רשומות ההתקדמות יופיעו כאן -->
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="bip-chart"></canvas>
                        <div class="chart-controls">
                            <button onclick="resetProgressRecords('bip')" class="reset-btn">אפס נתונים</button>
                        </div>
                    </div>
                </div>
                
                <div class="training-plan">
                    <button onclick="toggleTrainingPlan()" class="training-plan-btn">הצג תוכנית אימונים</button>
                    <div id="training-plan-content-bip" class="training-plan-content">
                        <h3>תוכנית אימונים מומלצת</h3>
                        <div class="plan-options">
                            <select id="plan-level-bip">
                                <option value="beginner">מתחיל</option>
                                <option value="intermediate">מתקדם</option>
                                <option value="advanced">מתקדם מאוד</option>
                            </select>
                            <select id="plan-duration-bip">
                                <option value="4">4 שבועות</option>
                                <option value="8">8 שבועות</option>
                                <option value="12">12 שבועות</option>
                            </select>
                            <button onclick="generateTrainingPlan('bip')">צור תוכנית</button>
                        </div>
                        <div id="generated-plan-bip" class="generated-plan"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        נבנה ע"י אסף רוזן<br>
        לשאלות נא לפנות למייל - <a href="mailto:asirozen@gmail.com">asirozen@gmail.com</a>
    </div>

    <script>
        // נתוני הטבלה לפי שכבות - כפיפות מרפקים
        const pushupData = {
            "י'": [
                {score: 45, grade: 100},
                {score: 44, grade: 98},
                {score: 43, grade: 97},
                {score: 42, grade: 95},
                {score: 41, grade: 93},
                {score: 40, grade: 92},
                {score: 39, grade: 91},
                {score: 38, grade: 90},
                {score: 37, grade: 89},
                {score: 36, grade: 88},
                {score: 35, grade: 87},
                {score: 34, grade: 86},
                {score: 33, grade: 85},
                {score: 32, grade: 84},
                {score: 31, grade: 83},
                {score: 30, grade: 82},
                {score: 29, grade: 81},
                {score: 28, grade: 80},
                {score: 27, grade: 79},
                {score: 26, grade: 78},
                {score: 25, grade: 75},
                {score: 24, grade: 74},
                {score: 23, grade: 73},
                {score: 22, grade: 72},
                {score: 21, grade: 71},
                {score: 20, grade: 70},
                {score: 19, grade: 69},
                {score: 18, grade: 68},
                {score: 17, grade: 65},
                {score: 16, grade: 64},
                {score: 15, grade: 62},
                {score: 14, grade: 61},
                {score: 13, grade: 60},
                {score: 12, grade: 57},
                {score: 11, grade: 55},
                {score: 10, grade: 50},
                {score: 9, grade: 47},
                {score: 8, grade: 45},
                {score: 7, grade: 40},
                {score: 6, grade: 35},
                {score: 5, grade: 30}
            ],
            "יא": [
                {score: 50, grade: 100},
                {score: 49, grade: 99},
                {score: 48, grade: 98},
                {score: 47, grade: 97},
                {score: 46, grade: 95},
                {score: 45, grade: 94},
                {score: 44, grade: 93},
                {score: 43, grade: 92},
                {score: 42, grade: 91},
                {score: 41, grade: 90},
                {score: 40, grade: 89},
                {score: 39, grade: 88},
                {score: 38, grade: 87},
                {score: 37, grade: 86},
                {score: 36, grade: 85},
                {score: 35, grade: 84},
                {score: 34, grade: 83},
                {score: 33, grade: 82},
                {score: 32, grade: 81},
                {score: 31, grade: 80},
                {score: 30, grade: 79},
                {score: 29, grade: 78},
                {score: 28, grade: 76},
                {score: 27, grade: 75},
                {score: 26, grade: 74},
                {score: 25, grade: 73},
                {score: 24, grade: 72},
                {score: 23, grade: 70},
                {score: 22, grade: 69},
                {score: 21, grade: 68},
                {score: 20, grade: 67},
                {score: 19, grade: 66},
                {score: 18, grade: 65},
                {score: 17, grade: 64},
                {score: 16, grade: 62},
                {score: 15, grade: 60},
                {score: 14, grade: 57},
                {score: 13, grade: 55},
                {score: 12, grade: 50},
                {score: 11, grade: 47},
                {score: 10, grade: 45},
                {score: 9, grade: 40},
                {score: 8, grade: 35},
                {score: 7, grade: 30}
            ],
            "יב": [
                {score: 55, grade: 100},
                {score: 54, grade: 98},
                {score: 53, grade: 96},
                {score: 52, grade: 95},
                {score: 51, grade: 94},
                {score: 50, grade: 93},
                {score: 49, grade: 92},
                {score: 48, grade: 91},
                {score: 47, grade: 90},
                {score: 46, grade: 89},
                {score: 45, grade: 88},
                {score: 44, grade: 87},
                {score: 43, grade: 86},
                {score: 42, grade: 85},
                {score: 41, grade: 84},
                {score: 40, grade: 83},
                {score: 39, grade: 82},
                {score: 38, grade: 81},
                {score: 37, grade: 80},
                {score: 36, grade: 79},
                {score: 35, grade: 78},
                {score: 34, grade: 77},
                {score: 33, grade: 76},
                {score: 32, grade: 75},
                {score: 31, grade: 74},
                {score: 30, grade: 73},
                {score: 29, grade: 72},
                {score: 28, grade: 71},
                {score: 27, grade: 70},
                {score: 26, grade: 69},
                {score: 25, grade: 68},
                {score: 24, grade: 67},
                {score: 23, grade: 66},
                {score: 22, grade: 65},
                {score: 21, grade: 64},
                {score: 20, grade: 63},
                {score: 19, grade: 62},
                {score: 18, grade: 60},
                {score: 17, grade: 59},
                {score: 16, grade: 57},
                {score: 15, grade: 55},
                {score: 14, grade: 50},
                {score: 13, grade: 47},
                {score: 12, grade: 45},
                {score: 11, grade: 43},
                {score: 10, grade: 40},
                {score: 9, grade: 35},
                {score: 8, grade: 30}
            ]
        };

        // נתוני הטבלה לפי שכבות - מתח
        const tensionData = {
            "י": [
                {score: 12, grade: 100},
                {score: 11, grade: 95},
                {score: 10, grade: 90},
                {score: 9, grade: 86},
                {score: 8, grade: 82},
                {score: 7, grade: 78},
                {score: 6, grade: 74},
                {score: 5, grade: 70},
                {score: 4, grade: 65},
                {score: 3, grade: 60},
                {score: 2, grade: 55},
                {score: 1, grade: 50}
            ],
            "יא": [
                {score: 14, grade: 100},
                {score: 13, grade: 96},
                {score: 12, grade: 92},
                {score: 11, grade: 88},
                {score: 10, grade: 84},
                {score: 9, grade: 80},
                {score: 8, grade: 76},
                {score: 7, grade: 72},
                {score: 6, grade: 68},
                {score: 5, grade: 64},
                {score: 4, grade: 60},
                {score: 3, grade: 56},
                {score: 2, grade: 55},
                {score: 1, grade: 50}
            ],
            "יב": [
                {score: 16, grade: 100},
                {score: 15, grade: 96},
                {score: 14, grade: 93},
                {score: 13, grade: 90},
                {score: 12, grade: 86},
                {score: 11, grade: 83},
                {score: 10, grade: 80},
                {score: 9, grade: 76},
                {score: 8, grade: 72},
                {score: 7, grade: 68},
                {score: 6, grade: 65},
                {score: 5, grade: 63},
                {score: 4, grade: 61},
                {score: 3, grade: 58},
                {score: 2, grade: 55},
                {score: 1, grade: 50}
            ]
        };

        // נתוני הטבלה עבור קפיצות בדלגית
        const ropeData = [
            {score: 150, grade: 100},
            {score: 149, grade: 99},
            {score: 148, grade: 98},
            {score: 147, grade: 97},
            {score: 146, grade: 97},
            {score: 145, grade: 96},
            {score: 144, grade: 96},
            {score: 143, grade: 95},
            {score: 142, grade: 95},
            {score: 141, grade: 94},
            {score: 140, grade: 94},
            {score: 138, grade: 93},
            {score: 137, grade: 92},
            {score: 136, grade: 92},
            {score: 135, grade: 91},
            {score: 134, grade: 90},
            {score: 133, grade: 90},
            {score: 132, grade: 89},
            {score: 131, grade: 88},
            {score: 130, grade: 88},
            {score: 129, grade: 87},
            {score: 128, grade: 87},
            {score: 127, grade: 86},
            {score: 126, grade: 85},
            {score: 125, grade: 85},
            {score: 124, grade: 84},
            {score: 123, grade: 84},
            {score: 122, grade: 83},
            {score: 121, grade: 83},
            {score: 118, grade: 82},
            {score: 115, grade: 81},
            {score: 112, grade: 80},
            {score: 110, grade: 79},
            {score: 108, grade: 78},
            {score: 106, grade: 77},
            {score: 103, grade: 76},
            {score: 100, grade: 75},
            {score: 98, grade: 74},
            {score: 96, grade: 73},
            {score: 94, grade: 72},
            {score: 92, grade: 71},
            {score: 90, grade: 70},
            {score: 89, grade: 70},
            {score: 88, grade: 69},
            {score: 87, grade: 69},
            {score: 86, grade: 68},
            {score: 85, grade: 68},
            {score: 84, grade: 67},
            {score: 83, grade: 66},
            {score: 82, grade: 66},
            {score: 81, grade: 65},
            {score: 80, grade: 64},
            {score: 79, grade: 64},
            {score: 78, grade: 63},
            {score: 77, grade: 63},
            {score: 76, grade: 62},
            {score: 75, grade: 62},
            {score: 74, grade: 61},
            {score: 73, grade: 61},
            {score: 72, grade: 60},
            {score: 71, grade: 59},
            {score: 70, grade: 58},
            {score: 68, grade: 57},
            {score: 66, grade: 56},
            {score: 65, grade: 55},
            {score: 64, grade: 54},
            {score: 63, grade: 53},
            {score: 62, grade: 52},
            {score: 61, grade: 51},
            {score: 60, grade: 50},
            {score: 59, grade: 49},
            {score: 58, grade: 48},
            {score: 57, grade: 47},
            {score: 56, grade: 46},
            {score: 55, grade: 45},
            {score: 54, grade: 44},
            {score: 53, grade: 43},
            {score: 52, grade: 42},
            {score: 51, grade: 41},
            {score: 50, grade: 40},
            {score: 0, grade: 30}
        ];

        // נתוני הטבלה עבור ריצת 2000 מטר
        const runData = {
            "10": [
                "08:00", "08:03", "08:06", "08:09", "08:12", "08:15", "08:18", "08:21", "08:24", "08:27",
                "08:30", "08:34", "08:38", "08:42", "08:46", "08:50", "08:54", "08:58", "09:02", "09:06",
                "09:10", "09:15", "09:20", "09:25", "09:30", "09:35", "09:40", "09:45", "09:50", "09:55",
                "10:00", "10:06", "10:12", "10:18", "10:24", "10:30", "10:37", "10:44", "10:51", "10:58",
                "11:05", "11:12", "11:19", "11:26", "11:33", "11:40", "11:47", "11:54", "12:01", "12:08",
                "12:15", "12:22", "12:29", "12:36", "12:43", "12:50", "12:57", "13:04", "13:11", "13:18",
                "13:25", "13:35", "13:45", "13:55", "14:05", "14:15", "14:25", "14:35", "14:45", "14:55",
                "15:05"
            ],
            "11": [
                "07:30", "07:33", "07:36", "07:39", "07:42", "07:45", "07:48", "07:51", "07:54", "07:57",
                "08:00", "08:04", "08:08", "08:12", "08:16", "08:20", "08:24", "08:28", "08:32", "08:36",
                "08:40", "08:45", "08:50", "08:55", "09:00", "09:05", "09:10", "09:15", "09:20", "09:25",
                "09:30", "09:36", "09:42", "09:48", "09:54", "10:00", "10:07", "10:14", "10:21", "10:28",
                "10:35", "10:42", "10:49", "10:56", "11:03", "11:10", "11:17", "11:24", "11:31", "11:38",
                "11:45", "11:52", "11:59", "12:06", "12:13", "12:20", "12:27", "12:34", "12:41", "12:48",
                "12:55", "13:05", "13:15", "13:25", "13:35", "13:45", "13:55", "14:05", "14:15", "14:25",
                "14:35"
            ],
            "12": [
                "07:00", "07:03", "07:06", "07:09", "07:12", "07:15", "07:18", "07:21", "07:24", "07:27",
                "07:30", "07:34", "07:38", "07:42", "07:46", "07:50", "07:54", "07:58", "08:02", "08:06",
                "08:10", "08:15", "08:20", "08:25", "08:30", "08:35", "08:40", "08:45", "08:50", "08:55",
                "09:00", "09:06", "09:12", "09:18", "09:24", "09:30", "09:37", "09:44", "09:51", "09:58",
                "10:05", "10:12", "10:19", "10:26", "10:33", "10:40", "10:47", "10:54", "11:01", "11:08",
                "11:15", "11:22", "11:29", "11:36", "11:43", "11:50", "11:57", "12:04", "12:11", "12:18",
                "12:25", "12:35", "12:45", "12:55", "13:05", "13:15", "13:25", "13:35", "13:45", "13:55",
                "14:05"
            ],
            "grades": [
                100, 99, 98, 97, 96, 95, 94, 93, 92, 91,
                90, 89, 88, 87, 86, 85, 84, 83, 82, 81,
                80, 79, 78, 77, 76, 75, 74, 73, 72, 71,
                70, 69, 68, 67, 66, 65, 64, 63, 62, 61,
                60, 59, 58, 57, 56, 55, 54, 53, 52, 51,
                50, 49, 48, 47, 46, 45, 44, 43, 42, 41,
                40, 39, 38, 37, 36, 35, 34, 33, 32, 31,
                30
            ]
        };

        // טבלת ההמרה עבור ריצת כדורי כח
        const ballRunConversionTable = {
            30: 100,
            29.5: 99,
            29: 98,
            28.5: 97,
            28: 96,
            27.5: 95,
            27: 94,
            26.5: 93,
            26: 92,
            25.5: 91,
            25: 90,
            24.5: 89,
            24: 88,
            23.5: 87,
            23: 86,
            22.5: 85,
            22: 84,
            21.5: 83,
            21: 82,
            20.5: 81,
            20: 80,
            19.5: 77,
            19: 75,
            18.5: 72,
            18: 70,
            17.5: 67,
            17: 65,
            16.5: 62,
            16: 60,
            15.5: 57,
            15: 55,
            14.5: 52,
            14: 50,
            13.5: 47,
            13: 45,
            12.5: 42,
            12: 40,
            11.5: 37,
            11: 35,
            10.5: 32,
            10: 30
        };

        // נתוני הטבלה לפי שכבות - ריצת ביפ
        const bipGradeTables = {
            "10": [
                {score: 12.2, grade: 100},
                {score: 12.01, grade: 99},
                {score: 11.10, grade: 98},
                {score: 11.9, grade: 98},
                {score: 11.7, grade: 97},
                {score: 11.5, grade: 96},
                {score: 11.3, grade: 95},
                {score: 11.01, grade: 94},
                {score: 10.11, grade: 93},
                {score: 10.9, grade: 92},
                {score: 10.7, grade: 91},
                {score: 10.5, grade: 90},
                {score: 10.3, grade: 89},
                {score: 10.01, grade: 88},
                {score: 9.9, grade: 87},
                {score: 9.7, grade: 86},
                {score: 9.5, grade: 85},
                {score: 9.3, grade: 84},
                {score: 9.01, grade: 83},
                {score: 8.11, grade: 82},
                {score: 8.9, grade: 81},
                {score: 8.7, grade: 80},
                {score: 8.6, grade: 79},
                {score: 8.5, grade: 78},
                {score: 8.4, grade: 77},
                {score: 8.3, grade: 76},
                {score: 8.2, grade: 75},
                {score: 8.01, grade: 74},
                {score: 7.10, grade: 73},
                {score: 7.9, grade: 72},
                {score: 7.8, grade: 71},
                {score: 7.7, grade: 70},
                {score: 7.6, grade: 69},
                {score: 7.5, grade: 68},
                {score: 7.4, grade: 67},
                {score: 7.3, grade: 66},
                {score: 7.2, grade: 65},
                {score: 7.01, grade: 64},
                {score: 6.10, grade: 63},
                {score: 6.9, grade: 62},
                {score: 6.8, grade: 61},
                {score: 6.7, grade: 60},
                {score: 6.6, grade: 59},
                {score: 6.5, grade: 58},
                {score: 6.4, grade: 57},
                {score: 6.3, grade: 56},
                {score: 6.2, grade: 55},
                {score: 6.01, grade: 54},
                {score: 5.9, grade: 53},
                {score: 5.8, grade: 52},
                {score: 5.7, grade: 51},
                {score: 5.6, grade: 50},
                {score: 5.5, grade: 49},
                {score: 5.4, grade: 48},
                {score: 5.3, grade: 47},
                {score: 5.2, grade: 46},
                {score: 5.01, grade: 45},
                {score: 4.9, grade: 44},
                {score: 4.8, grade: 43},
                {score: 4.7, grade: 42},
                {score: 4.6, grade: 41},
                {score: 4.5, grade: 40},
                {score: 4.4, grade: 39},
                {score: 4.3, grade: 38},
                {score: 4.2, grade: 37},
                {score: 4.01, grade: 36},
                {score: 3.8, grade: 35},
                {score: 3.7, grade: 34},
                {score: 3.6, grade: 33},
                {score: 3.5, grade: 32},
                {score: 3.4, grade: 31},
                {score: 3.3, grade: 30}
            ],
            "11": [
                {score: 12.10, grade: 100},
                {score: 12.8, grade: 99},
                {score: 12.6, grade: 98},
                {score: 12.4, grade: 97},
                {score: 12.2, grade: 96},
                {score: 12.01, grade: 95},
                {score: 11.11, grade: 94},
                {score: 11.9, grade: 93},
                {score: 11.7, grade: 92},
                {score: 11.5, grade: 91},
                {score: 11.3, grade: 90},
                {score: 11.01, grade: 89},
                {score: 10.11, grade: 88},
                {score: 10.9, grade: 87},
                {score: 10.7, grade: 86},
                {score: 10.5, grade: 85},
                {score: 10.3, grade: 84},
                {score: 10.01, grade: 83},
                {score: 9.9, grade: 82},
                {score: 9.8, grade: 81},
                {score: 9.6, grade: 80},
                {score: 9.4, grade: 79},
                {score: 9.01, grade: 78},
                {score: 8.11, grade: 77},
                {score: 8.9, grade: 76},
                {score: 8.7, grade: 75},
                {score: 8.6, grade: 74},
                {score: 8.5, grade: 73},
                {score: 8.4, grade: 72},
                {score: 8.3, grade: 71},
                {score: 8.2, grade: 70},
                {score: 8.01, grade: 69},
                {score: 7.10, grade: 68},
                {score: 7.9, grade: 67},
                {score: 7.8, grade: 66},
                {score: 7.7, grade: 65},
                {score: 7.6, grade: 64},
                {score: 7.5, grade: 63},
                {score: 7.4, grade: 62},
                {score: 7.3, grade: 61},
                {score: 7.2, grade: 60},
                {score: 7.01, grade: 59},
                {score: 6.10, grade: 58},
                {score: 6.9, grade: 57},
                {score: 6.8, grade: 56},
                {score: 6.7, grade: 55},
                {score: 6.6, grade: 54},
                {score: 6.5, grade: 53},
                {score: 6.4, grade: 52},
                {score: 6.3, grade: 51},
                {score: 6.2, grade: 50},
                {score: 6.01, grade: 49},
                {score: 5.9, grade: 48},
                {score: 5.8, grade: 47},
                {score: 5.7, grade: 46},
                {score: 5.6, grade: 45},
                {score: 5.5, grade: 44},
                {score: 5.4, grade: 43},
                {score: 5.3, grade: 42},
                {score: 5.2, grade: 41},
                {score: 5.01, grade: 40},
                {score: 4.9, grade: 39},
                {score: 4.8, grade: 38},
                {score: 4.7, grade: 37},
                {score: 4.6, grade: 36},
                {score: 4.5, grade: 35},
                {score: 4.4, grade: 34},
                {score: 4.3, grade: 33},
                {score: 4.2, grade: 32},
                {score: 4.01, grade: 31},
                {score: 3.8, grade: 30}
            ],
            "12": [
                {score: 13.2, grade: 100},
                {score: 13.01, grade: 99},
                {score: 12.11, grade: 98},
                {score: 12.9, grade: 97},
                {score: 12.7, grade: 96},
                {score: 12.5, grade: 95},
                {score: 12.3, grade: 94},
                {score: 12.01, grade: 93},
                {score: 11.11, grade: 92},
                {score: 11.9, grade: 91},
                {score: 11.7, grade: 90},
                {score: 11.5, grade: 89},
                {score: 11.3, grade: 88},
                {score: 11.01, grade: 87},
                {score: 10.11, grade: 86},
                {score: 10.9, grade: 85},
                {score: 10.7, grade: 84},
                {score: 10.5, grade: 83},
                {score: 10.3, grade: 82},
                {score: 10.01, grade: 81},
                {score: 9.9, grade: 80},
                {score: 9.7, grade: 79},
                {score: 9.5, grade: 78},
                {score: 9.3, grade: 77},
                {score: 9.01, grade: 76},
                {score: 8.11, grade: 75},
                {score: 8.1, grade: 74},
                {score: 8.9, grade: 73},
                {score: 8.8, grade: 72},
                {score: 8.7, grade: 71},
                {score: 8.6, grade: 70},
                {score: 8.5, grade: 69},
                {score: 8.4, grade: 68},
                {score: 8.3, grade: 67},
                {score: 8.2, grade: 66},
                {score: 8.01, grade: 65},
                {score: 7.10, grade: 64},
                {score: 7.9, grade: 63},
                {score: 7.8, grade: 62},
                {score: 7.7, grade: 61},
                {score: 7.6, grade: 60},
                {score: 7.5, grade: 59},
                {score: 7.4, grade: 58},
                {score: 7.3, grade: 57},
                {score: 7.2, grade: 56},
                {score: 7.01, grade: 55},
                {score: 6.10, grade: 54},
                {score: 6.9, grade: 53},
                {score: 6.8, grade: 52},
                {score: 6.7, grade: 51},
                {score: 6.6, grade: 50},
                {score: 6.5, grade: 49},
                {score: 6.4, grade: 48},
                {score: 6.3, grade: 47},
                {score: 6.2, grade: 46},
                {score: 6.01, grade: 45},
                {score: 5.9, grade: 44},
                {score: 5.8, grade: 43},
                {score: 5.7, grade: 42},
                {score: 5.6, grade: 41},
                {score: 5.5, grade: 40},
                {score: 5.4, grade: 39},
                {score: 5.3, grade: 38},
                {score: 5.2, grade: 37},
                {score: 5.01, grade: 36},
                {score: 4.9, grade: 35},
                {score: 4.8, grade: 34},
                {score: 4.7, grade: 33},
                {score: 4.6, grade: 32},
                {score: 4.5, grade: 31},
                {score: 4.4, grade: 30}
            ]
        };

        // פונקציות לחישוב ציונים
        function calculateGrade() {
            const grade = document.getElementById("grade").value;
            const scoreInput = document.getElementById("score").value;
            const score = parseInt(scoreInput);
            const resultDiv = document.getElementById("result");
            const feedbackDiv = document.getElementById("feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(score)) {
                resultDiv.innerHTML = '<span class="error">אנא הזן מספר תקין של כפיפות מרפקים</span>';
                return;
            }
            
            const gradeData = pushupData[grade];
            if (!gradeData) {
                resultDiv.innerHTML = '<span class="error">שכבת גיל לא זוהתה</span>';
                return;
            }
            
            let foundItem = gradeData.find(item => item.score === score);
            let gradeValue = null;
            
            if (foundItem) {
                gradeValue = foundItem.grade;
                resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
            } else {
                let closestItem = null;
                for (const item of gradeData) {
                    if (item.score <= score && (!closestItem || item.score > closestItem.score)) {
                        closestItem = item;
                    }
                }
                
                if (closestItem) {
                    gradeValue = closestItem.grade;
                    resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
                } else {
                    resultDiv.innerHTML = '<span class="error">לא נמצא ציון מתאים. התוצאה שהזנת נמוכה מדי.</span>';
                    return;
                }
            }
            
            if (gradeValue === 100) {
                feedbackDiv.innerHTML = '<div class="champion">כל הכבוד אלוף! תוצאה מעולה בכפיפות מרפקים!</div>';
            } else if (gradeValue >= 95) {
                feedbackDiv.innerHTML = '<div class="excellent">תוצאה מצוינת! אתה בכושר מעולה!</div>';
            } else if (gradeValue >= 85) {
                feedbackDiv.innerHTML = '<div class="great">תוצאה טובה מאוד! המשך כך!</div>';
            } else if (gradeValue >= 75) {
                feedbackDiv.innerHTML = '<div class="good">תוצאה טובה! יש לך פוטנציאל להשתפר עוד!</div>';
            } else if (gradeValue >= 65) {
                feedbackDiv.innerHTML = '<div class="average">לא רע! עם עוד אימונים תוכל לשפר את התוצאה!</div>';
            } else {
                feedbackDiv.innerHTML = '<div class="needs-improvement">תמשיך להתאמן ותשפר את התוצאה בהדרגה!</div>';
            }
        }

        function calculateTensionGrade() {
            const grade = document.getElementById("tension-grade").value;
            const scoreInput = document.getElementById("tension-score").value;
            const score = parseInt(scoreInput);
            const resultDiv = document.getElementById("tension-result");
            const feedbackDiv = document.getElementById("tension-feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(score)) {
                resultDiv.innerHTML = '<span class="error">אנא הזן מספר תקין של פעמים במתח</span>';
                return;
            }
            
            const gradeData = tensionData[grade];
            if (!gradeData) {
                resultDiv.innerHTML = '<span class="error">שכבת גיל לא זוהתה</span>';
                return;
            }
            
            let foundItem = gradeData.find(item => item.score === score);
            let gradeValue = null;
            
            if (foundItem) {
                gradeValue = foundItem.grade;
                resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
            } else {
                let closestItem = null;
                for (const item of gradeData) {
                    if (item.score <= score && (!closestItem || item.score > closestItem.score)) {
                        closestItem = item;
                    }
                }
                
                if (closestItem) {
                    gradeValue = closestItem.grade;
                    resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
                } else {
                    resultDiv.innerHTML = '<span class="error">לא נמצא ציון מתאים. התוצאה שהזנת נמוכה מדי.</span>';
                    return;
                }
            }
            
            if (gradeValue === 100) {
                feedbackDiv.innerHTML = '<div class="champion">כל הכבוד אלוף! תוצאה מצוינת במתח!</div>';
            } else if (gradeValue >= 90) {
                feedbackDiv.innerHTML = '<div class="excellent">תוצאה מעולה במתח! אתה בכושר מצוין!</div>';
            } else if (gradeValue >= 80) {
                feedbackDiv.innerHTML = '<div class="great">תוצאה טובה מאוד במתח! המשך כך!</div>';
            } else if (gradeValue >= 70) {
                feedbackDiv.innerHTML = '<div class="good">תוצאה טובה במתח! יש לך פוטנציאל להשתפר עוד!</div>';
            } else if (gradeValue >= 60) {
                feedbackDiv.innerHTML = '<div class="average">לא רע במתח! עם עוד אימונים תוכל לשפר את התוצאה!</div>';
            } else {
                feedbackDiv.innerHTML = '<div class="needs-improvement">תמשיך להתאמן במתח ותשפר את התוצאה בהדרגה!</div>';
            }
        }

        function calculateRopeGrade() {
            const scoreInput = document.getElementById("rope-score").value;
            const score = parseInt(scoreInput);
            const resultDiv = document.getElementById("rope-result");
            const feedbackDiv = document.getElementById("rope-feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(score)) {
                resultDiv.innerHTML = '<span class="error">אנא הזן מספר תקין של קפיצות בדלגית</span>';
                return;
            }
            
            let foundItem = ropeData.find(item => item.score === score);
            let gradeValue = null;
            
            if (foundItem) {
                gradeValue = foundItem.grade;
                resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
            } else {
                let closestItem = null;
                for (const item of ropeData) {
                    if (item.score <= score && (!closestItem || item.score > closestItem.score)) {
                        closestItem = item;
                    }
                }
                
                if (closestItem) {
                    gradeValue = closestItem.grade;
                    resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${gradeValue}</span>`;
                } else {
                    resultDiv.innerHTML = '<span class="error">לא נמצא ציון מתאים. התוצאה שהזנת נמוכה מדי.</span>';
                    return;
                }
            }
            
            if (gradeValue === 100) {
                feedbackDiv.innerHTML = '<div class="champion">כל הכבוד אלוף! תוצאה מצוינת בקפיצות בדלגית!</div>';
            } else if (gradeValue >= 90) {
                feedbackDiv.innerHTML = '<div class="excellent">תוצאה מעולה בקפיצות בדלגית! אתה בכושר מצוין!</div>';
            } else if (gradeValue >= 80) {
                feedbackDiv.innerHTML = '<div class="great">תוצאה טובה מאוד בקפיצות בדלגית! המשך כך!</div>';
            } else if (gradeValue >= 70) {
                feedbackDiv.innerHTML = '<div class="good">תוצאה טובה בקפיצות בדלגית! יש לך פוטנציאל להשתפר עוד!</div>';
            } else if (gradeValue >= 60) {
                feedbackDiv.innerHTML = '<div class="average">לא רע בקפיצות בדלגית! עם עוד אימונים תוכל לשפר את התוצאה!</div>';
            } else {
                feedbackDiv.innerHTML = '<div class="needs-improvement">תמשיך להתאמן בקפיצות בדלגית ותשפר את התוצאה בהדרגה!</div>';
            }
        }

        function calculateRunGrade() {
            const grade = document.getElementById("run-grade").value;
            const minutes = parseInt(document.getElementById("run-minutes").value) || 0;
            const seconds = parseInt(document.getElementById("run-seconds").value) || 0;
            const resultDiv = document.getElementById("run-result");
            const feedbackDiv = document.getElementById("run-feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(minutes) || minutes < 0) {
                resultDiv.innerHTML = '<span class="error">נא להזין מספר דקות תקין</span>';
                return;
            }
            
            if (isNaN(seconds) || seconds < 0 || seconds >= 60) {
                resultDiv.innerHTML = '<span class="error">נא להזין מספר שניות תקין (0-59)</span>';
                return;
            }
            
            const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            const times = runData[grade];
            let foundGrade = 0;
            
            for (let i = 0; i < times.length; i++) {
                if (formattedTime <= times[i]) {
                    foundGrade = runData.grades[i];
                    break;
                }
            }
            
            if (formattedTime < times[0]) {
                foundGrade = 100;
            }
            else if (formattedTime > times[times.length-1]) {
                foundGrade = 30;
            }
            
            if (foundGrade > 0) {
                let gradeClass = "grade";
                let messageClass = "";
                let message = "";
                
                if (foundGrade >= 90) {
                    gradeClass += " excellent";
                    messageClass = "success";
                    message = "מצוין! ביצועים מעולים בריצה!";
                } else if (foundGrade >= 80) {
                    gradeClass += " great";
                    messageClass = "success";
                    message = "טוב מאוד! ביצועים טובים בריצה!";
                } else if (foundGrade >= 70) {
                    gradeClass += " good";
                    messageClass = "warning";
                    message = "עברת את המבחן, אבל אפשר להשתפר בריצה";
                } else if (foundGrade >= 55) {
                    gradeClass += " average";
                    messageClass = "warning";
                    message = "עברת את המבחן בקושי, כדאי להתאמן יותר על ריצה";
                } else {
                    gradeClass += " needs-improvement";
                    messageClass = "fail";
                    message = "לא עברת את המבחן, יש להשתפר בריצה!";
                }
                
                resultDiv.innerHTML = `הציון שלך הוא: <span class="${gradeClass}">${foundGrade}</span>`;
                feedbackDiv.innerHTML = message;
                feedbackDiv.className = messageClass;
            } else {
                resultDiv.innerHTML = '<span class="error">הזמן שהוזן לא נמצא בטבלה</span>';
                feedbackDiv.innerHTML = "לא ניתן למצוא ציון עבור זמן זה";
                feedbackDiv.className = "fail";
            }
        }

        function calculateBallRunGrade() {
            const scoreInput = document.getElementById("ball-run-score").value;
            const score = parseFloat(scoreInput);
            const resultDiv = document.getElementById("ball-run-result");
            const feedbackDiv = document.getElementById("ball-run-feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(score)) {
                resultDiv.innerHTML = '<span class="error">אנא הזן תוצאה חוקית</span>';
                return;
            }

            let grade = null;
            
            // חיפוש הציון המתאים
            for (const [time, g] of Object.entries(ballRunConversionTable)) {
                if (score <= parseFloat(time)) {
                    grade = g;
                } else {
                    break;
                }
            }

            // טיפול במקרים של תוצאות נמוכות מהטבלה
            if (grade === null) {
                if (score > 30) {
                    grade = 100; // אם התוצאה טובה מהטבלה
                } else if (score < 10) {
                    grade = 30; // אם התוצאה נמוכה מהטבלה
                }
            }

            // טיפול בערכים בין הטבלאיים
            if (grade === null) {
                // מציאת הערך הקרוב ביותר
                const times = Object.keys(ballRunConversionTable).map(parseFloat).sort((a,b) => a-b);
                let closestTime = times[0];
                let minDiff = Math.abs(score - closestTime);
                
                for (let i = 1; i < times.length; i++) {
                    const diff = Math.abs(score - times[i]);
                    if (diff < minDiff) {
                        minDiff = diff;
                        closestTime = times[i];
                    }
                }
                
                grade = ballRunConversionTable[closestTime];
            }

            if (grade !== null) {
                resultDiv.innerHTML = `הציון שלך הוא: <span class="grade">${grade}</span>`;
                
                if (grade === 100) {
                    feedbackDiv.innerHTML = '<div class="champion">כל הכבוד אלוף! תוצאה מצוינת בריצת כדורי כח!</div>';
                } else if (grade >= 90) {
                    feedbackDiv.innerHTML = '<div class="excellent">תוצאה מעולה בריצת כדורי כח! אתה בכושר מצוין!</div>';
                } else if (grade >= 80) {
                    feedbackDiv.innerHTML = '<div class="great">תוצאה טובה מאוד בריצת כדורי כח! המשך כך!</div>';
                } else if (grade >= 70) {
                    feedbackDiv.innerHTML = '<div class="good">תוצאה טובה בריצת כדורי כח! יש לך פוטנציאל להשתפר עוד!</div>';
                } else if (grade >= 60) {
                    feedbackDiv.innerHTML = '<div class="average">לא רע בריצת כדורי כח! עם עוד אימונים תוכל לשפר את התוצאה!</div>';
                } else {
                    feedbackDiv.innerHTML = '<div class="needs-improvement">תמשיך להתאמן בריצת כדורי כח ותשפר את התוצאה בהדרגה!</div>';
                }
            } else {
                resultDiv.innerHTML = '<span class="error">לא ניתן לחשב ציון עבור התוצאה שהוזנה</span>';
            }
        }

        function calculateBipGrade() {
            const grade = document.getElementById("bip-grade").value;
            const inputScore = parseFloat(document.getElementById("bip-score").value);
            const resultDiv = document.getElementById("bip-result");
            const feedbackDiv = document.getElementById("bip-feedback");
            
            feedbackDiv.innerHTML = '';
            feedbackDiv.className = 'feedback';
            
            if (isNaN(inputScore)) {
                resultDiv.textContent = "אנא הזן תוצאת מבחן תקינה";
                resultDiv.className = "error";
                resultDiv.style.display = "block";
                return;
            }

            const table = bipGradeTables[grade];
            let foundGrade = null;
            let isExactMatch = false;

            // חיפוש התוצאה המתאימה בטבלה
            for (let i = 0; i < table.length; i++) {
                if (inputScore === table[i].score) {
                    foundGrade = table[i].grade;
                    isExactMatch = true;
                    break;
                }
            }

            // אם לא נמצאה תוצאה מדויקת, נחפש את התוצאה הקרובה ביותר
            if (!isExactMatch) {
                let closestScore = null;
                let smallestDiff = Infinity;
                
                for (let i = 0; i < table.length; i++) {
                    const diff = Math.abs(inputScore - table[i].score);
                    if (diff < smallestDiff) {
                        smallestDiff = diff;
                        closestScore = table[i];
                    }
                }
                
                if (closestScore) {
                    foundGrade = closestScore.grade;
                }
            }

            if (foundGrade !== null) {
                if (isExactMatch) {
                    resultDiv.textContent = `הציון שלך הוא: ${foundGrade}`;
                    resultDiv.className = "success";
                } else {
                    resultDiv.textContent = `הציון שלך הוא: ${foundGrade} (תוצאה משוערת לפי התוצאה הקרובה ביותר)`;
                    resultDiv.className = "warning";
                }
                resultDiv.style.display = "block";
                
                if (foundGrade === 100) {
                    feedbackDiv.innerHTML = '<div class="champion">כל הכבוד אלוף! תוצאה מצוינת בריצת ביפ!</div>';
                } else if (foundGrade >= 90) {
                    feedbackDiv.innerHTML = '<div class="excellent">תוצאה מעולה בריצת ביפ! אתה בכושר מצוין!</div>';
                } else if (foundGrade >= 80) {
                    feedbackDiv.innerHTML = '<div class="great">תוצאה טובה מאוד בריצת ביפ! המשך כך!</div>';
                } else if (foundGrade >= 70) {
                    feedbackDiv.innerHTML = '<div class="good">תוצאה טובה בריצת ביפ! יש לך פוטנציאל להשתפר עוד!</div>';
                } else if (foundGrade >= 60) {
                    feedbackDiv.innerHTML = '<div class="average">לא רע בריצת ביפ! עם עוד אימונים תוכל לשפר את התוצאה!</div>';
                } else {
                    feedbackDiv.innerHTML = '<div class="needs-improvement">תמשיך להתאמן בריצת ביפ ותשפר את התוצאה בהדרגה!</div>';
                }
            } else {
                resultDiv.textContent = "תוצאת המבחן שהוזנה נמוכה מדי עבור הטבלה";
                resultDiv.className = "error";
                resultDiv.style.display = "block";
            }
        }

        // פונקציות לניהול טאבים
        function openTab(tabId) {
            // הסרת מחלקת active מכל הכפתורים והטאבים
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // הוספת מחלקת active לטאב ולכפתור הנבחר
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
            
            // גלילה לחלק הרלוונטי בדף
            document.getElementById(tabId).scrollIntoView({ behavior: 'smooth' });
            
            // רענון הגרף כאשר הטאב נפתח
            refreshChart(tabId);
        }

        // הוספת אירועים ללחיצה על כפתורי הטאבים
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                openTab(tabId);
            });
        });

        // אחסון נתוני התקדמות ב-localStorage
        function getProgressRecords(exercise) {
            const records = localStorage.getItem(`progress_${exercise}`);
            return records ? JSON.parse(records) : [];
        }

        function saveProgressRecords(exercise, records) {
            localStorage.setItem(`progress_${exercise}`, JSON.stringify(records));
        }

        // הוספת רשומת התקדמות
        function addProgressRecord(exercise) {
            const dateInput = document.getElementById(`${exercise}-date`);
            let valueInput;
            
            if (exercise === 'run') {
                const minutes = parseInt(document.getElementById('run-min').value) || 0;
                const seconds = parseInt(document.getElementById('run-sec').value) || 0;
                valueInput = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            } else {
                valueInput = document.getElementById(`${exercise}-count`).value || 
                             document.getElementById(`${exercise}-time`).value || 
                             document.getElementById(`${exercise}-level`).value;
            }
            
            if (!dateInput.value || !valueInput) {
                alert('אנא מלא את כל השדות');
                return;
            }
            
            const records = getProgressRecords(exercise);
            records.push({
                date: dateInput.value,
                value: valueInput
            });
            
            // מיון לפי תאריך
            records.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            saveProgressRecords(exercise, records);
            displayProgressRecords(exercise);
            refreshChart(exercise);
            
            // איפוס שדות הקלט
            dateInput.value = '';
            if (exercise !== 'run') {
                document.getElementById(`${exercise}-count`).value = '';
                document.getElementById(`${exercise}-time`).value = '';
                document.getElementById(`${exercise}-level`).value = '';
            } else {
                document.getElementById('run-min').value = '';
                document.getElementById('run-sec').value = '';
            }
        }

        // הצגת רשומות התקדמות
        function displayProgressRecords(exercise) {
            const records = getProgressRecords(exercise);
            const container = document.getElementById(`${exercise}-records`);
            
            container.innerHTML = '';
            
            if (records.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666;">אין עדיין רשומות</div>';
                return;
            }
            
            records.forEach(record => {
                const recordElement = document.createElement('div');
                recordElement.className = 'record-item';
                
                const date = new Date(record.date);
                const formattedDate = date.toLocaleDateString('he-IL');
                
                recordElement.innerHTML = `
                    <span>${formattedDate}</span>
                    <span>${record.value}</span>
                `;
                
                container.appendChild(recordElement);
            });
        }

        // יצירת גרף התקדמות
        function refreshChart(exercise) {
            const records = getProgressRecords(exercise);
            const ctx = document.getElementById(`${exercise}-chart`).getContext('2d');
            
            // אם אין נתונים, נציג הודעה
            if (records.length === 0) {
                document.getElementById(`${exercise}-chart`).style.display = 'none';
                return;
            }
            
            document.getElementById(`${exercise}-chart`).style.display = 'block';
            
            // אם כבר יש גרף קיים, נשמיד אותו
            if (window[`${exercise}Chart`]) {
                window[`${exercise}Chart`].destroy();
            }
            
            // הכנת נתונים לגרף
            const labels = records.map(record => {
                const date = new Date(record.date);
                return date.toLocaleDateString('he-IL');
            });
            
            let data = records.map(record => {
                if (exercise === 'run') {
                    const [minutes, seconds] = record.value.split(':');
                    return parseInt(minutes) + (parseInt(seconds) / 60);
                }
                return parseFloat(record.value);
            });
            
            // הפיכת הנתונים כך שהערכים הטובים יותר יהיו גבוהים יותר בגרף
            if (exercise === 'run' || exercise === 'ball-run') {
                data = data.map(val => -val); // הפיכת הסימן עבור זמנים (ככל שפחות - יותר טוב)
            }
            
            // חישוב ציונים עבור הגרף
            const grades = records.map(record => {
                if (exercise === 'pushups') {
                    const grade = document.getElementById("grade").value;
                    const score = parseInt(record.value);
                    const gradeData = pushupData[grade];
                    let foundItem = gradeData.find(item => item.score === score);
                    return foundItem ? foundItem.grade : null;
                } else if (exercise === 'tension') {
                    const grade = document.getElementById("tension-grade").value;
                    const score = parseInt(record.value);
                    const gradeData = tensionData[grade];
                    let foundItem = gradeData.find(item => item.score === score);
                    return foundItem ? foundItem.grade : null;
                } else if (exercise === 'rope') {
                    const score = parseInt(record.value);
                    let foundItem = ropeData.find(item => item.score === score);
                    if (!foundItem) {
                        for (const item of ropeData) {
                            if (item.score <= score && (!foundItem || item.score > foundItem.score)) {
                                foundItem = item;
                            }
                        }
                    }
                    return foundItem ? foundItem.grade : null;
                } else if (exercise === 'run') {
                    const grade = document.getElementById("run-grade").value;
                    const [minutes, seconds] = record.value.split(':');
                    const formattedTime = `${minutes}:${seconds}`;
                    const times = runData[grade];
                    for (let i = 0; i < times.length; i++) {
                        if (formattedTime <= times[i]) {
                            return runData.grades[i];
                        }
                    }
                    if (formattedTime < times[0]) return 100;
                    if (formattedTime > times[times.length-1]) return 30;
                    return null;
                } else if (exercise === 'ball-run') {
                    const score = parseFloat(record.value);
                    let grade = null;
                    for (const [time, g] of Object.entries(ballRunConversionTable)) {
                        if (score <= parseFloat(time)) {
                            grade = g;
                        } else {
                            break;
                        }
                    }
                    if (grade === null) {
                        if (score > 30) grade = 100;
                        else if (score < 10) grade = 30;
                    }
                    if (grade === null) {
                        const times = Object.keys(ballRunConversionTable).map(parseFloat).sort((a,b) => a-b);
                        let closestTime = times[0];
                        let minDiff = Math.abs(score - closestTime);
                        for (let i = 1; i < times.length; i++) {
                            const diff = Math.abs(score - times[i]);
                            if (diff < minDiff) {
                                minDiff = diff;
                                closestTime = times[i];
                            }
                        }
                        grade = ballRunConversionTable[closestTime];
                    }
                    return grade;
                } else if (exercise === 'bip') {
                    const grade = document.getElementById("bip-grade").value;
                    const inputScore = parseFloat(record.value);
                    const table = bipGradeTables[grade];
                    let foundGrade = null;
                    let foundItem = table.find(item => item.score === inputScore);
                    if (foundItem) {
                        return foundItem.grade;
                    } else {
                        let closestItem = null;
                        for (const item of table) {
                            if (item.score <= inputScore && (!closestItem || item.score > closestItem.score)) {
                                closestItem = item;
                            }
                        }
                        return closestItem ? closestItem.grade : null;
                    }
                }
                return null;
            }).filter(grade => grade !== null);
            
            const chartData = {
                labels: labels,
                datasets: [{
                    label: 'תוצאה',
                    data: data,
                    backgroundColor: '#4CAF50',
                    borderColor: '#2E7D32',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: false
                },
                {
                    label: 'ציון',
                    data: grades,
                    backgroundColor: '#1565C0',
                    borderColor: '#0D47A1',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: false,
                    yAxisID: 'y1'
                }]
            };
            
            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        ticks: {
                            callback: function(value) {
                                if (exercise === 'run' || exercise === 'ball-run') {
                                    const absValue = Math.abs(value);
                                    if (exercise === 'run') {
                                        const minutes = Math.floor(absValue);
                                        const seconds = Math.round((absValue - minutes) * 60);
                                        return `${minutes}:${seconds.toString().padStart(2, '0')}`;
                                    } else {
                                        return absValue.toFixed(1);
                                    }
                                }
                                return value;
                            }
                        }
                    },
                    y1: {
                        position: 'right',
                        beginAtZero: false,
                        min: 30,
                        max: 100,
                        grid: {
                            drawOnChartArea: false
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.datasetIndex === 0) {
                                    if (exercise === 'run') {
                                        const absValue = Math.abs(context.raw);
                                        const minutes = Math.floor(absValue);
                                        const seconds = Math.round((absValue - minutes) * 60);
                                        label += `${minutes}:${seconds.toString().padStart(2, '0')}`;
                                    } else if (exercise === 'ball-run') {
                                        label += Math.abs(context.raw).toFixed(1) + ' שניות';
                                    } else {
                                        label += context.raw;
                                    }
                                } else {
                                    label += context.raw + ' (ציון)';
                                }
                                return label;
                            }
                        }
                    }
                }
            };
            
            window[`${exercise}Chart`] = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: chartOptions
            });
        }

        // איפוס נתוני התקדמות
        function resetProgressRecords(exercise) {
            if (confirm('האם אתה בטוח שברצונך לאפס את כל נתוני ההתקדמות?')) {
                localStorage.removeItem(`progress_${exercise}`);
                displayProgressRecords(exercise);
                refreshChart(exercise);
            }
        }

        // הצגת/הסתרת תוכנית אימונים
        function toggleTrainingPlan() {
            const content = document.getElementById('training-plan-content');
            if (content.style.display === 'block') {
                content.style.display = 'none';
            } else {
                content.style.display = 'block';
            }
        }

        // יצירת תוכנית אימונים
        function generateTrainingPlan(exercise) {
            const level = document.getElementById(`plan-level-${exercise}`).value;
            const duration = parseInt(document.getElementById(`plan-duration-${exercise}`).value);
            const planContainer = document.getElementById(`generated-plan-${exercise}`);
            
            let plan = '';
            
            if (exercise === 'pushups') {
                if (level === 'beginner') {
                    plan = `
                        <h4>תוכנית אימונים למתחילים בכפיפות מרפקים (${duration} שבועות)</h4>
                        <p>התוכנית מתבססת על 3 אימונים בשבוע:</p>
                        <ul>
                            <li>שבוע 1-${duration}: 3 סטים של 10-15 חזרות עם מנוחה של דקה בין סטים</li>
                            <li>הגדל את מספר החזרות בכל שבוע ב-2-3 חזרות לסט</li>
                            <li>בצע את התרגיל בקצב איטי ומבוקר</li>
                            <li>בסוף כל אימון בצע מתיחות לשרירי החזה והזרועות</li>
                        </ul>
                    `;
                } else if (level === 'intermediate') {
                    plan = `
                        <h4>תוכנית אימונים למתקדמים בכפיפות מרפקים (${duration} שבועות)</h4>
                        <p>התוכנית מתבססת על 4 אימונים בשבוע:</p>
                        <ul>
                            <li>שבוע 1-${Math.floor(duration/2)}: 4 סטים של 15-20 חזרות עם מנוחה של 45 שניות בין סטים</li>
                            <li>שבוע ${Math.floor(duration/2)+1}-${duration}: 5 סטים של 20-25 חזרות עם מנוחה של 30 שניות בין סטים</li>
                            <li>ניתן להוסיף משקל (תיק גב) להגדלת הקושי</li>
                            <li>בצע וריאציות שונות של כפיפות מרפקים</li>
                        </ul>
                    `;
                } else {
                    plan = `
                        <h4>תוכנית אימונים למתקדמים מאוד בכפיפות מרפקים (${duration} שבועות)</h4>
                        <p>התוכנית מתבססת על 5 אימונים בשבוע:</p>
                        <ul>
                            <li>שבוע 1-${Math.floor(duration/3)}: 5 סטים של 25-30 חזרות עם מנוחה של 30 שניות בין סטים</li>
                            <li>שבוע ${Math.floor(duration/3)+1}-${Math.floor(2*duration/3)}: 5 סטים של 30-35 חזרות עם מנוחה של 20 שניות בין סטים</li>
                            <li>שבוע ${Math.floor(2*duration/3)+1}-${duration}: 5 סטים של 35-40 חזרות עם מנוחה של 15 שניות בין סטים</li>
                            <li>הוסף משקל ותרגילי פליאומטריקה לשיפור הכוח המתפרץ</li>
                        </ul>
                    `;
                }
            } else if (exercise === 'tension') {
                // הוספת לוגיקה דומה לכל התרגילים האחרים...
            }
            
            planContainer.innerHTML = plan;
        }

        // אתחול האפליקציה - הצגת רשומות התקדמות עבור כל תרגיל
        document.addEventListener('DOMContentLoaded', function() {
            const exercises = ['pushups', 'tension', 'rope', 'run', 'ball-run', 'bip'];
            exercises.forEach(exercise => {
                displayProgressRecords(exercise);
                refreshChart(exercise);
            });
            
            // הגדרת תאריך ברירת מחדל לשדות התאריך
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                input.value = today;
            });
        });

        // אפשרות להקיש Enter במקום ללחוץ על הכפתור
        document.getElementById('ball-run-score').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateBallRunGrade();
            }
        });
    </script>
    <script src="https://cdn.counter.dev/script.js" data-id="a1a39a35-32a7-43b6-b83a-9be582e40c72" data-utcoffset="3"></script>
</body>
</html>
